<!doctype html><html lang=es class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Repositorio con web dedicado a dar unas notas sobre algunos de estos elementos. El tema será tratado tanto desde el entorno gráfico de ArduinoBlocks como desde el IDE de Arduino."><meta name=author content="Federico Coca"><link href=https://fgcoca.github.io/tiras-y-matrices-de-LEDs/temas/LED8x8/ rel=canonical><link rel=icon href=../../img/favicon.png><meta name=generator content="mkdocs-1.4.2, mkdocs-material-8.5.10"><title>Matrices de 8x8 LEDs - Tiras y matrices de LEDs</title><link rel=stylesheet href=../../assets/stylesheets/main.975780f9.min.css><link rel=stylesheet href=../../assets/stylesheets/palette.2505c338.min.css><meta name=theme-color content=#02a6f2><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback"><style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style><script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script></head> <body dir=ltr data-md-color-scheme=default data-md-color-primary=light-blue data-md-color-accent=deep-purple> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#matrices-de-8x8-leds class=md-skip> Saltar a contenido </a> </div> <div data-md-component=announce> </div> <header class=md-header data-md-component=header> <nav class="md-header__inner md-grid" aria-label=Cabecera> <a href=../.. title="Tiras y matrices de LEDs" class="md-header__button md-logo" aria-label="Tiras y matrices de LEDs" data-md-component=logo> <img src=../../img/favicon.png alt=logo> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> Tiras y matrices de LEDs </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> Matrices de 8x8 LEDs </span> </div> </div> </div> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Búsqueda placeholder=Búsqueda autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg> </label> <nav class=md-search__options aria-label=Search> <button type=reset class="md-search__icon md-icon" title=Limpiar aria-label=Limpiar tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg> </button> </nav> </form> <div class=md-search__output> <div class=md-search__scrollwrap data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Inicializando búsqueda </div> <ol class=md-search-result__list></ol> </div> </div> </div> </div> </div> <div class=md-header__source> <a href=https://github.com/fgcoca/tiras-y-matrices-de-LEDs title="Ir al repositorio" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg> </div> <div class=md-source__repository> fgcoca/tiras-y-matrices-de-LEDs </div> </a> </div> </nav> </header> <div class=md-container data-md-component=container> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary" aria-label=Navegación data-md-level=0> <label class=md-nav__title for=__drawer> <a href=../.. title="Tiras y matrices de LEDs" class="md-nav__button md-logo" aria-label="Tiras y matrices de LEDs" data-md-component=logo> <img src=../../img/favicon.png alt=logo> </a> Tiras y matrices de LEDs </label> <div class=md-nav__source> <a href=https://github.com/fgcoca/tiras-y-matrices-de-LEDs title="Ir al repositorio" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg> </div> <div class=md-source__repository> fgcoca/tiras-y-matrices-de-LEDs </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../.. class=md-nav__link> Introducción </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_2 type=checkbox id=__nav_2> <label class=md-nav__link for=__nav_2> Software <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Software data-md-level=1> <label class=md-nav__title for=__nav_2> <span class="md-nav__icon md-icon"></span> Software </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../softAB/ class=md-nav__link> ArduinoBlocks </a> </li> <li class=md-nav__item> <a href=../softIDE/ class=md-nav__link> IDE 2 </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../alimentar/ class=md-nav__link> Alimentación </a> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4 type=checkbox id=__nav_4 checked> <label class=md-nav__link for=__nav_4> Programación <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Programación data-md-level=1> <label class=md-nav__title for=__nav_4> <span class="md-nav__icon md-icon"></span> Programación </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../matriz8x32/ class=md-nav__link> Matriz WS2812 8x32 </a> </li> <li class=md-nav__item> <a href=../matriz16x16/ class=md-nav__link> Matriz WS2812 16x16 </a> </li> <li class=md-nav__item> <a href=../matriz8x8/ class=md-nav__link> Matriz WS2812 8x8 </a> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" data-md-toggle=toc type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> Matrices de 8x8 LEDs <span class="md-nav__icon md-icon"></span> </label> <a href=./ class="md-nav__link md-nav__link--active"> Matrices de 8x8 LEDs </a> <nav class="md-nav md-nav--secondary" aria-label="Tabla de contenidos"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Tabla de contenidos </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#matriz-de-8x8-leds class=md-nav__link> Matriz de 8x8 LEDs </a> </li> <li class=md-nav__item> <a href=#matriz-de-8x8-leds-i2c class=md-nav__link> Matriz de 8x8 LEDs I2C </a> <nav class=md-nav aria-label="Matriz de 8x8 LEDs I2C"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#las-comunicaciones-i2c class=md-nav__link> Las comunicaciones I2C </a> </li> <li class=md-nav__item> <a href=#escanear-dispositivos-i2c class=md-nav__link> Escanear dispositivos I2C </a> </li> <li class=md-nav__item> <a href=#cambiar-la-direccion-fisica-del-dispositivo-i2c class=md-nav__link> Cambiar la dirección física del dispositivo I2C </a> </li> <li class=md-nav__item> <a href=#conexionado class=md-nav__link> Conexionado </a> </li> <li class=md-nav__item> <a href=#programacion-por-bloques class=md-nav__link> Programación por bloques </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#matriz-de-8x8-leds-con-max7219 class=md-nav__link> Matriz de 8x8 LEDs con MAX7219 </a> <nav class=md-nav aria-label="Matriz de 8x8 LEDs con MAX7219"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#instalar-libreria-max72xx class=md-nav__link> Instalar librería MAX72xx </a> </li> <li class=md-nav__item> <a href=#funcion-md_max72xx class=md-nav__link> Función MD_MAX72xx() </a> </li> <li class=md-nav__item> <a href=#funciones-miembro-de-la-clase-md_max72xx class=md-nav__link> Funciones miembro de la clase MD_MAX72xx </a> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_5 type=checkbox id=__nav_5> <label class=md-nav__link for=__nav_5> El juego de la serpiente <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="El juego de la serpiente" data-md-level=1> <label class=md-nav__title for=__nav_5> <span class="md-nav__icon md-icon"></span> El juego de la serpiente </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../3d/ class=md-nav__link> 3D </a> </li> <li class=md-nav__item> <a href=../serpiente/ class=md-nav__link> Programa </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_6 type=checkbox id=__nav_6> <label class=md-nav__link for=__nav_6> Miscelanea <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Miscelanea data-md-level=1> <label class=md-nav__title for=__nav_6> <span class="md-nav__icon md-icon"></span> Miscelanea </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../Miscelanea/about/ class=md-nav__link> Autor </a> </li> <li class=md-nav__item> <a href=../../Miscelanea/lic/ class=md-nav__link> Licencias </a> </li> <li class=md-nav__item> <a href=../../Miscelanea/webgrafia/ class=md-nav__link> Webgrafia/Bibliografía </a> </li> <li class=md-nav__item> <a href=../../Miscelanea/soft/ class=md-nav__link> Software utilizado </a> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label="Tabla de contenidos"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Tabla de contenidos </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#matriz-de-8x8-leds class=md-nav__link> Matriz de 8x8 LEDs </a> </li> <li class=md-nav__item> <a href=#matriz-de-8x8-leds-i2c class=md-nav__link> Matriz de 8x8 LEDs I2C </a> <nav class=md-nav aria-label="Matriz de 8x8 LEDs I2C"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#las-comunicaciones-i2c class=md-nav__link> Las comunicaciones I2C </a> </li> <li class=md-nav__item> <a href=#escanear-dispositivos-i2c class=md-nav__link> Escanear dispositivos I2C </a> </li> <li class=md-nav__item> <a href=#cambiar-la-direccion-fisica-del-dispositivo-i2c class=md-nav__link> Cambiar la dirección física del dispositivo I2C </a> </li> <li class=md-nav__item> <a href=#conexionado class=md-nav__link> Conexionado </a> </li> <li class=md-nav__item> <a href=#programacion-por-bloques class=md-nav__link> Programación por bloques </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#matriz-de-8x8-leds-con-max7219 class=md-nav__link> Matriz de 8x8 LEDs con MAX7219 </a> <nav class=md-nav aria-label="Matriz de 8x8 LEDs con MAX7219"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#instalar-libreria-max72xx class=md-nav__link> Instalar librería MAX72xx </a> </li> <li class=md-nav__item> <a href=#funcion-md_max72xx class=md-nav__link> Función MD_MAX72xx() </a> </li> <li class=md-nav__item> <a href=#funciones-miembro-de-la-clase-md_max72xx class=md-nav__link> Funciones miembro de la clase MD_MAX72xx </a> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <h1 id=matrices-de-8x8-leds><font color=#8B008B>Matrices de 8x8 LEDs</font><a class=headerlink href=#matrices-de-8x8-leds title="Permanent link">&para;</a></h1> <p>Fundamentalmente, aunque su aspecto exterior es idéntico, vamos a distinguir dos tipos:</p> <ul> <li>Matriz de 8x8 LEDs sin controlador</li> <li>Matrices I2C controladas por el chip HT16K33 como las que se contemplan en ArduinoBlocks.</li> <li>Matrices controladas por el chip MAX7219 o MAX7221 que se controlan con la librería <a href=https://majicdesigns.github.io/MD_MAX72XX/ >MD_MAX72xx</a></li> </ul> <h2 id=matriz-de-8x8-leds><font color=#007575><strong>Matriz de 8x8 LEDs</strong></font><a class=headerlink href=#matriz-de-8x8-leds title="Permanent link">&para;</a></h2> <p>Se trata simplemente de diodos LED dispuestos en forma de matriz de 8x8 en los que se han unido por filas todos los cátodos o todos los ánodos de los diodos y se ha hecho lo propio con la otra patilla de cada columna. Esto da lugar a los dos tipos posibles de matrices, de ánodo común o de cátodo común. En la figura siguiente vemos el aspecto externo de estos elementos y los diagramas de conexión interna de cada tipo.</p> <p><center></p> <p><img alt="Aspecto y diagramas de conexión interna" src=../../img/matriz8x8/apecto_CC_AC.png></p> <p><em>Aspecto y diagramas de conexión interna</em></p> <p></center></p> <p>La más común dentro del mundo Arduino es la de cátodo común para excitar los pines con niveles altos.</p> <p>En total una matriz de este tipo dispone de 16 patillas para controlar los 64 LEDs por lo que es evidente que no se pueden controlar los diodos como si fueran independientes ya que solamente disponemos de pines que se corresponde con filas y columnas.</p> <p>Para mostrar un gráfico o letra en la matriz lo que en realidad hay que hacer es componer ese gráfico por columnas y hacer un recorrido de todos los necesarios como para que la percepción visual nos haga creer que estamos viendo ese gráfico o texto.</p> <p>Utilizar la matriz de esta forma se antoja complejo y además son necesarios muchas patillas de la placa de control, por no hablar de que además se requiere de una resistencia en cada fila para limitar la corriente por los LEDs.</p> <p>Para evitar esta complejidad se utilizan circuitos integrados especializados en el control de LEDs como el <a href=https://cdn-shop.adafruit.com/datasheets/ht16K33v110.pdf>HT16K33</a> o el <a href=https://www.analog.com/media/en/technical-documentation/data-sheets/max7219-max7221.pdf>MAX7219</a> de los que tenemos su hojas de datos en los enlaces anteriores.</p> <h2 id=matriz-de-8x8-leds-i2c><font color=#007575><strong>Matriz de 8x8 LEDs I2C</strong></font><a class=headerlink href=#matriz-de-8x8-leds-i2c title="Permanent link">&para;</a></h2> <p>Basada en el circuito HT16K33 que es un controlador de LED multifunción. El números de segmentos de visualización en el dispositivo es 128. El HT16K33 es compatible con la mayoría de los microcontroladores y se comunica a través de un bus I2C bidireccional de dos líneas. El chip de control tiene un reloj incorporado para multiplexar la pantalla. Además el módulo utiliza una fuente de corriente constante que permite obtener un color uniforme y brillante de todos los diodos. El aspecto del dispositivo visto por ambas caras es el de la figura siguiente:</p> <p><center></p> <p><img alt="Aspecto de la matriz I2C de 8x8" src=../../img/matriz8x8/8x8_I2C.png></p> <p><em>Aspecto de la matriz I2C de 8x8</em></p> <p></center></p> <p>Sus principales características son:</p> <ul> <li>Matriz de LEDs de 8 filas y 8 columnas</li> <li>Direccionada por un chip HT16K33</li> <li>Conexión tipo I2C</li> <li>Tensión de alimentación: 5V</li> <li>Frecuencia de trabajo: 400KHz</li> <li>Potencia de entrada: 2.5W</li> <li>Corriente de entrada: 500mA</li> </ul> <h3 id=las-comunicaciones-i2c><font color=#AA0000>Las comunicaciones I2C</font><a class=headerlink href=#las-comunicaciones-i2c title="Permanent link">&para;</a></h3> <p>El bus conocido por las siglas I2C, IIC o I²C (del inglés Inter-Integrated Circuit = Circuito inter-integrado), es un bus serie de datos desarrollado en 1982 por Philips Semiconductors (hoy NXP Semiconductors, parte de Qualcomm). Se utiliza principalmente internamente para la comunicación entre diferentes partes de un circuito, por ejemplo, entre un controlador y circuitos periféricos integrados. Posteriormente fue adoptado progresivamente por otros fabricantes hasta convertirse en un estándar del mercado con miles de circuitos integrados de diferentes fabricantes.</p> <p>I2C también se denomina TWI (Two Wired Interface) únicamente por motivos de licencia, denominación introducida por Atmel. No obstante, la patente caducó en 2006, por lo que actualmente no hay restricción sobre el uso del término I2C.</p> <p>El bus I2C requiere únicamente dos cables o lineas de señal para su funcionamiento, uno para la señal de reloj (SCL, Serial Clock) y otro para el envío de datos (SDA, Serial Data). Ambas líneas precisan resistencias de pull-up hacia Vcc. Cualquier dispositivo conectado a estas líneas es de drenador o colector abierto (Open Collector), lo cual en combinación con las resistencias pull-up, crea un circuito Wired-AND. En la figura siguiente vemos el diagrama básico de conexionado del bus con algunos ejemplos de dispositivos. La señal de reloj siempre es generada por el circuito que actúa como Master.</p> <p><center></p> <p><img alt="Diagrama de conexión del bus I2C" src=../../img/matriz8x8/diagrama_IIC.png></p> <p><em>Diagrama de conexión del bus I2C</em></p> <p></center></p> <p>Para ser reconocido en el bus, cada dispositivo dispone de una dirección, que se emplea para acceder a cada uno de ellos de forma individual. Esta dirección puede ser fijada por hardware, en cuyo caso se pueden modificar los últimos 3 bits mediante “jumpers” o microinterruptores (ejemplo de la matriz de 8x8), o por software.</p> <p>En general, cada dispositivo conectado al bus debe tener una dirección única. Si tenemos varios dispositivos similares tendremos que cambiar la dirección o, en caso de no ser posible, implementar un bus secundario.</p> <p>El bus I2C tiene una arquitectura de tipo master-slave, lo que indica que el master es el encargado de controlar al resto de dispositivos tipo slave con los que se comunica y que se comunican con el, teniendo siempre el marte prioridad absoluta. El dispositivo master es el que inicia la comunicación con los slaves. Los slaves no pueden iniciar la comunicación (el master tiene que preguntarles), ni hablar entre si directamente.</p> <p>El bus I2C debe ser por lo tanto síncrono, es decir debe existir una señal de reloj que controle las comunicaciones. Es el master el que proporciona la señal de reloj, que mantiene sincronizados a todos los dispositivos del bus. De esta forma, se elimina la necesidad de que cada dispositivo tenga su propio reloj, de tener que acordar una velocidad de transmisión y mecanismos para mantener la transmisión sincronizada como en UART o SPI. En la figura vemos un cronograma ejemplo del funcionamiento del sistema.</p> <p><center></p> <p><img alt="Cronograma trabajo bus I2C" src=../../img/matriz8x8/crono_iic.png></p> <p><em>Cronograma trabajo bus I2C</em></p> <p></center></p> <p>El protocolo de comunicación I2C sigue la siguiente secuencia:</p> <ul> <li>Primero, el master genera la señal de reloj del bus (SCL).</li> <li>Se inicia la comunicación por orden del master al establecer la condición de START, que se produce cuando SDA pasa de uno a cero y se mantiene en cero durante un tiempo.</li> <li>El master direcciona a los slaves.</li> <li>El master indica si se va a leer o escribir.</li> <li>El slave direccionado responde con una señal de conformidad ACK (acknowledge).</li> <li>Se transmite los datos byte a byte desde SDA al receptor. Por cada pulso desde SCL se transmite un bit de información.</li> <li>El destinatario de la información responde con una señal de conformidad ACK.</li> <li>Se acaba la comunicación cuando el master establece la condición de STOP, que se produce cuando SDA, por orden del master pasa de cero a uno y se mantiene en uno durante un tiempo.</li> </ul> <p>Son muchos los dispositivos I2C que se pueden direccionar por este bus I2C, siendo lo más común en los dispositivos para I2C que utilicen direcciones de 7 bits, aunque existen dispositivos de 10 bits, pero es un caso raro. Una dirección de 7 bits implica que se pueden poner hasta 128 dispositivos sobre un bus I2C. Hemos visto que las direcciones son de 8 bits y esto es porque el bit extra de los 7 de la dirección lo emplea el master para informar al slave si va a leer o escribir. Si el bit de lectura/escritura es cero, el dispositivo master está escribiendo en el slave. Si el bit es 1 el master está leyendo desde el slave. La dirección de 7 bit se coloca en los 7 bits más significativos del byte y el bit de lectura/escritura es el bit menos significativo.</p> <h3 id=escanear-dispositivos-i2c><font color=#AA0000>Escanear dispositivos I2C</font><a class=headerlink href=#escanear-dispositivos-i2c title="Permanent link">&para;</a></h3> <p>Si no conocemos la dirección especifica de nuestro módulo podemos utilizar un pequeño programa que llamaremos Escaner-I2C y que se encargará de identificar la dirección I2C y todos los dispositivos I2C conectados a nuestra placa. Debemos crear un proyecto, en esta ocasión, de tipo "Arduino UNO" para tener disponible el menú I2C que nos de acceso al bloque "Escanear dispositivos I2C..." tal y como vemos en la figura siguiente:</p> <p><center></p> <p><img alt="Menu I2C" src=../../img/matriz8x8/menu_I2C.png></p> <p><em>Menu I2C</em></p> <p></center></p> <p>Un sencillo programa como el de la figura siguiente nos permite ver los dispositivos I2C conectados y su dirección física asociada.</p> <p><center></p> <p><img alt="Programa Escaner-I2C" src=../../img/matriz8x8/Escaner_I2C.png></p> <p><em>Programa Escaner-I2C</em></p> <p></center></p> <p>El resultado de tener conectada una LCD I2C al puerto lo vemos en la figura siguiente:</p> <p><center></p> <p><img alt="Consola para el programa Escaner-I2C" src=../../img/matriz8x8/Consola_Escaner_I2C.png></p> <p><em>Consola para el programa Escaner-I2C</em></p> <p></center></p> <h3 id=cambiar-la-direccion-fisica-del-dispositivo-i2c><font color=#AA0000>Cambiar la dirección física del dispositivo I2C</font><a class=headerlink href=#cambiar-la-direccion-fisica-del-dispositivo-i2c title="Permanent link">&para;</a></h3> <p>Esta tarea nos va a resultar especialmente útil si disponemos de dispositivos I2C con una dirección fijada de fábrica y queremos conectar varios de ellos en nuestro proyecto. En el caso de las matrices de 8x8 LEDs tenemos los dos tipos que vemos en la figura siguiente:</p> <p><center></p> <p><img alt="Pads y microinterruptores para configuración dirección física I2C" src=../../img/matriz8x8/conf_iic.png></p> <p><em>Pads y microinterruptores para configuración dirección física I2C</em></p> <p></center></p> <p>Si no fijamos en la parte posterior vemos los tres grupos de pads enmarcados en verde que se nombran A2, A1 y A0 de izquierda a derecha que nos permiten por soldadura cambiar la dirección física. A2 es el bit de mayor peso y A0 es el de menor peso, de forma que si los pads están unidos suman su peso y si no lo están no suman. La dirección final es 0x70 + A2 + A1 + A0 según la siguiente tabla:</p> <p><center></p> <table> <thead> <tr> <th align=center>A2 (2²=4)</th> <th align=center>A1 (2¹=2)</th> <th align=center>A0 (2⁰=1)</th> <th align=center>Dirección</th> <th align=center>Cálculo</th> </tr> </thead> <tbody> <tr> <td align=center>0</td> <td align=center>0</td> <td align=center>0</td> <td align=center>0x70</td> <td align=center>0x70 + 0 + 0 + 0</td> </tr> <tr> <td align=center>0</td> <td align=center>0</td> <td align=center>1</td> <td align=center>0x71</td> <td align=center>0x70 + 0 + 0 + 1</td> </tr> <tr> <td align=center>0</td> <td align=center>1</td> <td align=center>0</td> <td align=center>0x72</td> <td align=center>0x70 + 0 + 2 + 0</td> </tr> <tr> <td align=center>0</td> <td align=center>1</td> <td align=center>1</td> <td align=center>0x73</td> <td align=center>0x70 + 0 + 2 + 1</td> </tr> <tr> <td align=center>1</td> <td align=center>0</td> <td align=center>0</td> <td align=center>0x74</td> <td align=center>0x70 + 4 + 0 + 0</td> </tr> <tr> <td align=center>1</td> <td align=center>0</td> <td align=center>1</td> <td align=center>0x75</td> <td align=center>0x70 + 4 + 0 + 1</td> </tr> <tr> <td align=center>1</td> <td align=center>1</td> <td align=center>0</td> <td align=center>0x76</td> <td align=center>0x70 + 4 + 2 + 0</td> </tr> <tr> <td align=center>1</td> <td align=center>1</td> <td align=center>1</td> <td align=center>0x77</td> <td align=center>0x70 + 4 + 2 + 1</td> </tr> </tbody> </table> <p></center></p> <p>Como ayuda para conectar dispositivos I2C a nuestra placa de control expandiendo el conector I2C utilizamos la shield de conversión I2C que vemos en la figura siguiente.</p> <p><center></p> <p><img alt="Hub I2C" src=../../img/matriz8x8/hub.png></p> <p><em>Hub I2C</em></p> <p></center></p> <h3 id=conexionado><font color=#AA0000>Conexionado</font><a class=headerlink href=#conexionado title="Permanent link">&para;</a></h3> <p>El conexionado de este tipo de elementos requiere de los dos cables de alimentación mas los cables de comunicación I2C para las señales SDA y SCL. En la tabla siguiente vemos cuales son estos pines en los modelos de placa mas comunes.</p> <p><center></p> <table> <thead> <tr> <th align=center>Placa</th> <th align=center>Pin SDA</th> <th align=center>Pin SCL</th> </tr> </thead> <tbody> <tr> <td align=center>UNO</td> <td align=center>A4</td> <td align=center>A5</td> </tr> <tr> <td align=center>Nano</td> <td align=center>A4</td> <td align=center>A5</td> </tr> <tr> <td align=center>Mega</td> <td align=center>20</td> <td align=center>21</td> </tr> </tbody> </table> <p></center></p> <p>En la figura siguiente vemos el conexionado en el caso de una placa tipo UNO.</p> <p><center></p> <p><img alt="Conexión entre matriz y placa UNO" src=../../img/matriz8x8/conex_iic.png></p> <p><em>Conexión entre matriz y placa UNO</em></p> <p></center></p> <h3 id=programacion-por-bloques><font color=#AA0000>Programación por bloques</font><a class=headerlink href=#programacion-por-bloques title="Permanent link">&para;</a></h3> <p>Esta matriz la vamos a programar con ArduinoBlocks, donde tenemos disponibles los bloques y el diseñador de mapas de bits que podemos apreciar en la figura siguiente:</p> <p><center></p> <p><img alt="Bloques en ArduinoBlocks para la matriz I2C de 8x8 y diseñador" src=../../img/matriz8x8/bloques.png></p> <p><em>Bloques en ArduinoBlocks para la matriz I2C de 8x8 y diseñador</em></p> <p></center></p> <p>El diagrama de conexionado lo vemos en la figura siguiente:</p> <p><center></p> <p><img alt="Conexionado de la matriz I2C de 8x8" src=../../img/matriz8x8/conex_iic.png></p> <p><em>Conexionado de la matriz I2C de 8x8</em></p> <p></center></p> <p>Para encadenar módulos utilizamos los pines de salida para llevarlos a los de entrada del siguiente. Si observamos la única diferencia entre los grupos de pines es la etiqueta DIN (entrada de datos) y DOUT (salida de datos).</p> <p><font color=#0000FF><b>Caritas</b></font></p> <p>Vamos a hacer un programa que muestre una carita sonriente dos segundos, después una carita triste otros dos y finalmente que nos muestre un corazón latiendo.</p> <p>Comenzamos por diseñar los corazones que van a quedar como vemos en la figura siguiente:</p> <p><center></p> <p><img alt="Diseño de corazones" src=../../img/matriz8x8/corazones.png></p> <p><em>Diseño de corazones</em></p> <p></center></p> <p>El programa <a href=../../programas/caritas.abp>caritas</a> es el que vemos en la figura siguiente:</p> <p><center></p> <p><img alt=Caritas src=../../img/matriz8x8/caritas.png></p> <p><em>Caritas</em></p> <p></center></p> <p><font color=#0000FF><b>Texto</b></font></p> <p>Vamos a crear un programa que nos muestre un texto desplazándose, es decir, con una sola matriz vamos a mostrar el texto "ArduinoBlocks". El programa <a href=../../programas/texto.abp>texto</a> lo vemos en la figura siguiente:</p> <p><center></p> <p><img alt="Texto que se desplaza" src=../../img/matriz8x8/texto.png></p> <p><em>Texto que se desplaza</em></p> <p></center></p> <p>Si observamos detenidamente el contador se decrementa y por lo tanto es necesario detenerlo en un valor que haga que el texto aparezca entero y que reinicie la variable del contador, y esta es la misión del condicional dentro del bucle. La idea de hacerlo de esta forma es que el texto de desplace hacia la izquierda.</p> <p><font color=#0000FF><b>Dibujos</b></font></p> <p>El siguiente ejemplo es una sencilla muestra del resto de bloques disponibles. El programa <a href=../../programas/dibujos.abp>dibujos</a> está disponible en el enlace anterior.</p> <p><center></p> <p><img alt=Dibujos src=../../img/matriz8x8/dibujos.png></p> <p><em>Dibujos</em></p> <p></center></p> <h2 id=matriz-de-8x8-leds-con-max7219><font color=#007575><strong>Matriz de 8x8 LEDs con MAX7219</strong></font><a class=headerlink href=#matriz-de-8x8-leds-con-max7219 title="Permanent link">&para;</a></h2> <p>Los MAX7219/MAX7221 son controladores de cátodo común para pantallas LED numéricas de 7 segmentos de hasta 8 dígitos, gráficos de barras, paneles industriales y matriz de 64 LEDs. En el chip se incluyen un decodificador BCD, un circuito múltiplexador, controladores de segmentos y dígitos, y memoria RAM estática de 8x8 que almacena cada dígito.</p> <p>Sus principales características son:</p> <ul> <li><strong>Interfaz de control serie</strong></li> <li><strong>Conexión en cascada</strong></li> <li><strong>Modo de bajo consumo</strong></li> </ul> <p>Solamente son necesarios tres pines de la placa para controlar la matriz o matrices, ya que se pueden conectar varios MAX7219 en cascada y con un consumo de solo 120 uA.</p> <p>En la figura siguiente vemos tres modelos de este tipo de matriz de diodos LEDs.</p> <p><center></p> <p><img alt="Aspecto de varios de modelos con MAX7219" src=../../img/matriz8x8/apecto_CC_AC.png></p> <p><em>Aspecto de varios de modelos con MAX7219</em></p> <p></center></p> <p>En la figura siguiente vemos el diagrama de conexiones de este módulo.</p> <p><center></p> <p><img alt="Conexionado de la matriz serie de 8x8" src=../../img/matriz8x8/conex_serie.png></p> <p><em>Conexionado de la matriz serie de 8x8</em></p> <p></center></p> <p>Para programar estas matrices vamos a utilizar el IDE 2.0 y la librería <a href=https://majicdesigns.github.io/MD_MAX72XX/ >MD_MAX72xx</a> y lo primero que vamos a hacer es ver el proceso de instalación de la librería.</p> <h3 id=instalar-libreria-max72xx><font color=#AA0000>Instalar librería MAX72xx</font><a class=headerlink href=#instalar-libreria-max72xx title="Permanent link">&para;</a></h3> <p>Para ello abrimos el gestor de bibliotecas de cualquiera de las formas que vemos en la animación de la figura siguiente y vamos tecleando el nombre de la biblioteca hasta que nos aparezca en el listado. Una vez localizada hacemos clic en el botón 'Instalar', esperamos a que finalice y ya estamos listos para comenzar a programar.</p> <p><center></p> <p><img alt="Instalar librería MAX72xx" src=../../img/matriz8x8/instalar_lib_MD_MAX72xx.gif></p> <p><em>Instalar librería MAX72xx</em></p> <p></center></p> <h3 id=funcion-md_max72xx><font color=#AA0000>Función MD_MAX72xx()</font><a class=headerlink href=#funcion-md_max72xx title="Permanent link">&para;</a></h3> <p>La función tiene dos formas de invocar al constructor dependiendo de que argumentos le pasemos y responde a las dos formas básicas de hacerlo que vamos a ver a continuación.</p> <p><font color=#0000FF><b>Comunicación a través del puerto SPI</b></font></p> <p>Recordemos que SPI son las siglas de Serial Peripheral Interface y que se trata de un bus de comunicaciones síncrono en el que las comunicaciones entre el master y el slave se realizan a través de las siguientes líneas:</p> <ul> <li><strong>MOSI</strong> (Master-Output, Slave-Input). Comunicación del maestro al esclavo. También se suele denominar SDI o DIN.</li> <li><strong>MISO</strong> (Master-Input, Slave-Output). Comunicación del esclavo con el maestro. También se suele denominar SDO o DOUT.</li> <li><strong>SCK</strong> (Signal Clock). Señal de reloj suministrada por el maestro. También se suele denominar CLK o SCLK.</li> <li><strong>SS</strong> (Slave Select). Para seleccionar el dispositivo con el que se va a realizar la comunicación. También se suele denominar CS o SDA.</li> </ul> <p>Los pines asignados a los modelos de placa mas utilizados son los que vemos en la tabla siguiente:</p> <p><center></p> <table> <thead> <tr> <th align=center>Placa</th> <th align=center>CS</th> <th align=center>MOSI</th> <th align=center>MISO</th> <th align=center>SCK</th> </tr> </thead> <tbody> <tr> <td align=center>UNO</td> <td align=center>10</td> <td align=center>11</td> <td align=center>12</td> <td align=center>13</td> </tr> <tr> <td align=center>Nano</td> <td align=center>10</td> <td align=center>11</td> <td align=center>12</td> <td align=center>13</td> </tr> <tr> <td align=center>Mega</td> <td align=center>53</td> <td align=center>51</td> <td align=center>50</td> <td align=center>52</td> </tr> </tbody> </table> <p></center></p> <p>El constructor tiene la siguiente forma:</p> <div class=highlight><pre><span></span><code>MD_MAX72XX mx = MD_MAX72XX(HARDWARE_TYPE, CS_PIN, MAX_DEVICES); // Comunicación SPI
</code></pre></div> <p>Donde:</p> <ul> <li><strong>mx</strong>: es el objeto que se construye y que servirá para llamar al resto de funciones.</li> <li><strong>HARDWARE_TYPE</strong>: para indicar el tipo de matriz, como veremos mas adelante.</li> <li><strong>CS_PIN</strong>: es el pin que utilizaremos como Chip Select que se asigna según la tabla anterior.</li> <li><strong>MAX_DEVICES</strong>: para indicar el número de matrices que hemos conectado en cascada.</li> </ul> <p><font color=#0000FF><b>Comunicación a través de pines arbitrarios</b></font></p> <p>El constructor tiene ahora la siguiente forma:</p> <div class=highlight><pre><span></span><code>MD_MAX72XX mx = MD_MAX72XX(HARDWARE_TYPE, DATA_PIN, CLK_PIN, CS_PIN, MAX_DEVICES); // Pines arbitrarios
</code></pre></div> <p>Donde:</p> <ul> <li><strong>DATA_PIN</strong>: es el pin digital de la placa de control que se conecta a DIN en el módulo.</li> <li><strong>CLK_PIN</strong>: es el pin digital de la placa de control que se conecta a CLK en el módulo.</li> <li>El resto de parámetros tienen la misma descripción.</li> </ul> <p>En ambos casos el argumento <strong>HARDWARE_TYPE</strong> que corresponden al hardware soportado y que en la clase puede tomar cualquiera de estos valores del tipo enumerado:</p> <ul> <li><strong>GENERIC_HW</strong>. Hardware genérico.</li> <li><strong>FC16_HW</strong>. Módulos de hardware estilo FC-16 o Módulo con chip SMD.</li> <li><strong>PAROLA_HW</strong>. Módulos de hardware de estilo <a href=https://www.taydakits.com/instructions/parola-for-arduino>Parola</a>. Módulos para unir y construir pantallas actualmente sin soporte.</li> <li><strong>ICSTATION_HW</strong>. Módulo de hardware de estilo <a href="https://www.icstation.com/advanced_search_result.php?keywords=max72&search_in_description=1">ICStation</a>. Son módulos DIY como el del enlace.</li> <li><strong>DR0CR0RR0_HW</strong>. <em>Nota</em>.</li> <li><strong>DR0CR0RR1_HW</strong>. <em>Nota</em>.</li> <li><strong>DR0CR1RR0_HW</strong>. <em>Nota</em>; equivalente a GENERIC_HW.</li> <li><strong>DR0CR1RR1_HW</strong>. <em>Nota</em>.</li> <li><strong>DR1CR0RR0_HW</strong>. <em>Nota</em>; equivalente a FC16_HW.</li> <li><strong>DR1CR0RR1_HW</strong>. <em>Nota</em>.</li> <li><strong>DR1CR1RR0_HW</strong>. <em>Nota</em>; equivalente a PAROLA_HW.</li> <li><strong>R1CR1RR1_HW</strong>. <em>Nota</em>; equivalente a ICSTATION_HW.</li> </ul> <p><em>Nota</em>. Valor a utilizar cuando se conectan matrices en cascada.</p> <p>La forma de definir el tipo de hardware recomendada es:</p> <div class=highlight><pre><span></span><code>#define HARDWARE_TYPE MD_MAX72XX::PAROLA_HW // Para definir hardware Parola
</code></pre></div> <p>Una vez creado el objeto con el constructor ya podemos llamar a los miembros de la clase de la forma habitual, es decir el nombre de la clase seguido de un punto y el método que queramos.</p> <h3 id=funciones-miembro-de-la-clase-md_max72xx><font color=#AA0000>Funciones miembro de la clase MD_MAX72xx</font><a class=headerlink href=#funciones-miembro-de-la-clase-md_max72xx title="Permanent link">&para;</a></h3> <p>En este <a href=https://majicdesigns.github.io/MD_MAX72XX/functions.html>enlace hay una lista de todos los miembros de la clase</a> con enlaces a la documentación de la clase para cada miembro. Veamos algunos de ellos partiendo de la base de que el objeto creado por el constructor se llama 'mx'.</p> <ul> <li><strong>begin()</strong>. Inicialización de los datos del objeto creado. Esto debe llamarse desde el bucle <em>setup()</em>. En el ejemplo vamos a crear una prueba de control que iremos utilizando en los sucesivos. La función control() la vemos a continuación.</li> </ul> <p>El código del ejemplo <a href=../../programas/MAX72xx/1_prueba_inicial.zip>1_prueba_inicial</a> es el siguiente:</p> <div class=highlight><pre><span></span><code>#include &lt;MD_MAX72xx.h&gt;

// definición del tipo de hardware utilizando la clase
#define HARDWARE_TYPE MD_MAX72XX::GENERIC_HW

#define MAX_DEVICES 1

#define CLK_PIN   13 
#define DATA_PIN  11 
#define CS_PIN    10 

// cración del objeto mx
MD_MAX72XX mx = MD_MAX72XX(HARDWARE_TYPE, CS_PIN, MAX_DEVICES);

#define  DELAYTIME  100  // milisegundos

void setup() {
mx.begin(); // inicializamos el objeto mx

// hacemos un test de todos los diodos
mx.control(MD_MAX72XX::TEST, true); // activación modo prueba
delay(3000);
mx.control(MD_MAX72XX::TEST, false); // desactivación modo prueba

mx.control(MD_MAX72XX::INTENSITY, 10); // Establecimiento del brillo a 10
}

void loop() {


}
</code></pre></div> <ul> <li> <p><strong>control()</strong>. Función que nos permite configurar parámetros de control como el brillo o el modo bajo consumo. La función puede tomar alguna de las formas que vemos a continuación donde se especifica también el tipo y significado de los parámetros.</p> <ul> <li> <p>MODO 1 <em><br>mx.control(modo, valor);</em> <br>modo: es el parámetro a modificar <br>valor es el valor que se aplica al parámetro indicado</p> </li> <li> <p>MODO 2 <em><br>mx.control(dev, modo, valor);</em> <br>dev: es el módulo o dispositivo a configurar. Valor entre 0 y el número de dispositivos conectados <br>parametro: es el parámetro a modificar <br>valor es el valor que se aplica al parámetro indicado</p> </li> <li> <p>MODO 3 <em><br>mx.control(devIni, devFin, modo, valor);</em> <br>devIni: es el dispositivo inicial del grupo de módulos. <br>devFin: es el dispositivo final del grupo de módulos. <br>parametro: es el parámetro a modificar <br>valor es el valor que se aplica al parámetro indicado</p> </li> </ul> </li> </ul> <p>En todos los casos el parámetro modo es un tipo de dato enumerado <em>'controlRequest_t'</em> que puede tomar alguno de estos valores:</p> <p><strong>SHUTDOWN</strong>: Apagar MAX72xx. Admite como valores ON/OFF. Valor por defecto en la librería OFF.</p> <p><strong>INTENSITY</strong>: Para establecer el brillo de los LEDs. Valor numérico entre 0 y MAX_INTENSITY. Por defecto vale MAX_INTENSITY/2.</p> <p><strong>TEST</strong>: Para poner al MAX27xx en modo prueba. Admite como valores ON/OFF. Valor por defecto en la librería OFF.</p> <p><strong>/DECODE</strong>: Pone al MAX27xx en modo decodificador a 7 segmentos. Admite como valores ON/OFF. Valor por defecto en la librería OFF.</p> <p><strong>UPDATE</strong>: Para habilitar o deshabilitar la actualización automática. Admite como valores ON/OFF. Valor por defecto en la librería OFF. Cuando está en OFF es necesario ejecutar esta función para mostrar los cambios en la matriz.</p> <p><strong>WRAPAROUND</strong>: Para habilitar o deshabilitar el modo envolver en modo circular. Admite como valores ON/OFF. Valor por defecto en la librería OFF.</p> <p>En el ejemplo anterior hemos utilizado esta función.</p> <ul> <li> <p><strong>clear()</strong>. Borra todos los datos en todos los dispositivos. Apaga todos los LEDs. Es posible indicar la dirección del dispositivo a borrar en el buffer o el rango de dispositivos si indicamos el valor inicial y el final.</p> </li> <li> <p><strong>setColumn()</strong>. Estable el valor de los LEDs de la columna especificada. Si tenemos un grupo de matrices el primer parámetro a indicar es la dirección de la matriz.</p> </li> <li> <p><strong>setRow()</strong>. Estable el valor de los LEDs de la fila especificada. Si tenemos un grupo de matrices el primer parámetro a indicar es la dirección de la matriz.</p> </li> </ul> <p>Como continuación del ejemplo tenenmos el <a href=../../programas/MAX72xx/2_prueba_inicial.zip>2_prueba_inicial</a> utilizando las funciones anteriores. El programa completo es el siguiente:</p> <div class=highlight><pre><span></span><code>#include &lt;MD_MAX72xx.h&gt;

// definición del tipo de hardware utilizando la clase
#define HARDWARE_TYPE MD_MAX72XX::GENERIC_HW

#define MAX_DEVICES 1

#define CLK_PIN   13 
#define DATA_PIN  11 
#define CS_PIN    10 

// cración del objeto mx
MD_MAX72XX mx = MD_MAX72XX(HARDWARE_TYPE, CS_PIN, MAX_DEVICES);

#define  DELAYTIME  100  // milisegundos

void setup() {
mx.begin(); // inicializamos el objeto mx

// hacemos un test de todos los diodos
mx.control(MD_MAX72XX::TEST, true); // activación modo prueba
delay(3000);
mx.control(MD_MAX72XX::TEST, false); // desactivación modo prueba

mx.control(MD_MAX72XX::INTENSITY, 10); // Estsablecimiento del brillo a 10
}

void loop() {
  mx.clear();delay(1000);
  for (uint8_t i=0; i&lt;8; i++)
    mx.setColumn(i, 0b10101010);
  delay(1000);
  mx.clear();
  for (uint8_t j=0; j&lt;8; j++)
    mx.setRow(j, 0xAA);
  delay(1000);
  mx.clear();
}
</code></pre></div> <ul> <li><strong>setPoint()</strong>. Sirve para encender o apagar un LED indicando su fila y columna.</li> <li><strong>getColumnCount()</strong>. Cuenta el número de columnas.</li> <li><strong>getChar()</strong>. Carga un caracter en el buffer de usuario.</li> <li><strong>setChar()</strong>. Carga un caracter en la columna especificada.</li> <li><strong>transform()</strong>. Permite aplicar transformaciones como rotar, desplazar, invertir, etc, en la información que se muestra en la matriz. En la tabla siguiente vemos las transformaciones que se pueden realizar con la función transform().</li> </ul> <p><center></p> <table> <thead> <tr> <th align=center>Parámetro</th> <th>Transformación que realiza</th> </tr> </thead> <tbody> <tr> <td align=center>MD_MAX72XX::TSL</td> <td>Desplazar un píxel a la izquierda</td> </tr> <tr> <td align=center>MD_MAX72XX::TSR</td> <td>Desplazar un píxel a la derecha</td> </tr> <tr> <td align=center>MD_MAX72XX::TSU</td> <td>Desplazar un píxel hacia arriba</td> </tr> <tr> <td align=center>MD_MAX72XX::TSD</td> <td>Desplazar un píxel hacia abajo</td> </tr> <tr> <td align=center>MD_MAX72XX::TFLR</td> <td>Voltear de derecha a izquierda</td> </tr> <tr> <td align=center>MD_MAX72XX::TFUD</td> <td>Voltear de arriba hacia abajo</td> </tr> <tr> <td align=center>MD_MAX72XX::TR</td> <td>Rotar 90 grados en sentido horario</td> </tr> <tr> <td align=center>MD_MAX72XX::TINV</td> <td>Invertir píxeles</td> </tr> </tbody> </table> <p></center></p> <p>En el ejemplo siguiente tenemos el programa <a href=../../programas/MAX72xx/3_prueba_inicial.zip>3_prueba_inicial</a> en el que se aplican algunas de estas funciones y se incluyen dos transformaciones.</p> <p>En los ejemplos que acompañan a la librería y en las referencia dadas podemos encontrar mucha mas información sobre este tipo de elementos.</p> </article> </div> </div> </main> <footer class=md-footer> <nav class="md-footer__inner md-grid" aria-label=Pie> <a href=../matriz8x8/ class="md-footer__link md-footer__link--prev" aria-label="Anterior: Matriz WS2812 8x8" rel=prev> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg> </div> <div class=md-footer__title> <div class=md-ellipsis> <span class=md-footer__direction> Anterior </span> Matriz WS2812 8x8 </div> </div> </a> <a href=../3d/ class="md-footer__link md-footer__link--next" aria-label="Siguiente: 3D" rel=next> <div class=md-footer__title> <div class=md-ellipsis> <span class=md-footer__direction> Siguiente </span> 3D </div> </div> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg> </div> </a> </nav> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-copyright> <div class=md-copyright__highlight> Copyright &copy; 2020 - 2035 Federico Coca </div> Made with <a href=https://squidfunk.github.io/mkdocs-material/ target=_blank rel=noopener> Material for MkDocs </a> </div> <div class=md-social> <a href=https://twitter.com/fgcoca target=_blank rel=noopener title="Twitter de Federico Coca" class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 512 512"><!-- Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"/></svg> </a> <a href=https://github.com/fgcoca target=_blank rel=noopener title="Github de Federico Coca" class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 496 512"><!-- Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg> </a> <a href="https://www.instagram.com/cocafederico/?hl=es" target=_blank rel=noopener title="Instagram de Federico Coca" class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M224.1 141c-63.6 0-114.9 51.3-114.9 114.9s51.3 114.9 114.9 114.9S339 319.5 339 255.9 287.7 141 224.1 141zm0 189.6c-41.1 0-74.7-33.5-74.7-74.7s33.5-74.7 74.7-74.7 74.7 33.5 74.7 74.7-33.6 74.7-74.7 74.7zm146.4-194.3c0 14.9-12 26.8-26.8 26.8-14.9 0-26.8-12-26.8-26.8s12-26.8 26.8-26.8 26.8 12 26.8 26.8zm76.1 27.2c-1.7-35.9-9.9-67.7-36.2-93.9-26.2-26.2-58-34.4-93.9-36.2-37-2.1-147.9-2.1-184.9 0-35.8 1.7-67.6 9.9-93.9 36.1s-34.4 58-36.2 93.9c-2.1 37-2.1 147.9 0 184.9 1.7 35.9 9.9 67.7 36.2 93.9s58 34.4 93.9 36.2c37 2.1 147.9 2.1 184.9 0 35.9-1.7 67.7-9.9 93.9-36.2 26.2-26.2 34.4-58 36.2-93.9 2.1-37 2.1-147.8 0-184.8zM398.8 388c-7.8 19.6-22.9 34.7-42.6 42.6-29.5 11.7-99.5 9-132.1 9s-102.7 2.6-132.1-9c-19.6-7.8-34.7-22.9-42.6-42.6-11.7-29.5-9-99.5-9-132.1s-2.6-102.7 9-132.1c7.8-19.6 22.9-34.7 42.6-42.6 29.5-11.7 99.5-9 132.1-9s102.7-2.6 132.1 9c19.6 7.8 34.7 22.9 42.6 42.6 11.7 29.5 9 99.5 9 132.1s2.7 102.7-9 132.1z"/></svg> </a> <a href=https://twitter.com/clubroboticagra target=_blank rel=noopener title="Twitter de Club Robótica Granada" class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 512 512"><!-- Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"/></svg> </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <script id=__config type=application/json>{"base": "../..", "features": [], "search": "../../assets/javascripts/workers/search.16e2a7d4.min.js", "translations": {"clipboard.copied": "Copiado al portapapeles", "clipboard.copy": "Copiar al portapapeles", "search.config.lang": "es", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "B\u00fasqueda", "search.result.more.one": "1 m\u00e1s en esta p\u00e1gina", "search.result.more.other": "# m\u00e1s en esta p\u00e1gina", "search.result.none": "No se encontraron documentos", "search.result.one": "1 documento encontrado", "search.result.other": "# documentos encontrados", "search.result.placeholder": "Teclee para comenzar b\u00fasqueda", "search.result.term.missing": "Falta", "select.version.title": "Seleccionar versi\u00f3n"}}</script> <script src=../../assets/javascripts/bundle.5a2dcb6a.min.js></script> <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML"></script> </body> </html>